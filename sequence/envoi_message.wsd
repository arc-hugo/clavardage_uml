@startuml envoi_message
actor Employe
activate VueSession
activate ServiceCommunicationTCP
group Seq [envoi d'un messsage textuel]
    Employe -> VueSession : ecrireTexte(texte)
end
group Seq [envoi d'un fichier]
    Employe -> VueSession : selectionFichier(fichier)
end
VueSession -> ControleurSession : envoiMessage(msg)
activate ControleurSession
ControleurSession -> ServiceCommunicationTCP : envoi(paquet)
ServiceCommunicationTCP --> ControleurSession : reception
deactivate ControleurTCP
alt reception = true
    ControleurSession [hidden]-> ControleurSession
    ref over ControleurSession
        Enregistrement dans
            l'historique 
    end ref
    ControleurSession -> ModeleSession : ajoutMessage(msg)
    activate ModeleSession
    ModeleSession --> ControleurSession
    deactivate ModeleSession
    ControleurSession --> VueSession
else reception = false
    ControleurSession -> ModeleSession : ajoutErreurMessage(msg)
    activate ModeleSession
    ModeleSession --> ControleurSession
    deactivate ModeleSession
    ControleurSession --> VueSession
end
deactivate ControleurSession
@enduml